<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Fitness Calculator Suite</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Existing styles remain unchanged */
    .nav-buttons {
        flex-direction: column;
        gap: 0.5rem;
      }
      .nav-buttons button, .nav-buttons a {
        width: 100%;
        padding: 0.75rem;
        font-size: 0.9rem;
      }
  
      #navbar-iframe, .navbar { display: none !important; height: 0; visibility: hidden; }

    :root {
      --primary: #0074D9;
      --primary-dark: #0056a0;
      --accent: #2ECC40;
      --accent-dark: #1f9e35;
      --highlight: #FF4136;
      --dark: #222;
      --light: #f9f9f9;
      --gray: #e0e0e0;
      --text: #333;
      --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s ease;
      --success: #2ecc71;
      --warning: #f39c12;
      --danger: #e74c3c;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(135deg, #f5f7fa, #e4edf9);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      padding: 30px 20px;
      margin-bottom: 20px;
    }
    
    header h1 {
      color: var(--primary);
      font-size: 2.8rem;
      margin-bottom: 10px;
      background: linear-gradient(45deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    header p {
      max-width: 700px;
      margin: 0 auto;
      color: var(--dark);
      font-size: 1.1rem;
    }
    
    .tabs-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    .tabs {
      flex: 1;
      min-width: 250px;
      background: white;
      border-radius: 12px;
      box-shadow: var(--card-shadow);
      overflow: hidden;
      height: fit-content;
    }
    
    .tab-buttons {
      display: flex;
      flex-direction: column;
    }
    
    .tab-btn {
      padding: 16px 20px;
      background: white;
      color: var(--text);
      border: none;
      text-align: left;
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 12px;
      border-bottom: 1px solid var(--gray);
    }
    
    .tab-btn i {
      width: 24px;
      font-size: 1.2rem;
      color: var(--primary);
    }
    
    .tab-btn:hover, .tab-btn.active {
      background: var(--primary);
      color: white;
    }
    
    .tab-btn:hover i, .tab-btn.active i {
      color: white;
    }
    
    .tab-btn.active {
      font-weight: 600;
    }
    
    .content {
      flex: 3;
      min-width: 300px;
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: var(--card-shadow);
    }
    
    .tab-content {
      display: none;
      animation: fadeIn 0.4s ease;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .tab-content h2 {
      color: var(--primary);
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--primary);
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .calculator-info {
      background: #e1f0fa;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 25px;
      font-size: 1rem;
      line-height: 1.6;
    }
    
    .input-row {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .input-group {
      flex: 1;
      min-width: 250px;
    }
    
    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--dark);
    }
    
    .input-group input, .input-group select {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid var(--gray);
      border-radius: 8px;
      font-size: 1rem;
      transition: var(--transition);
    }
    
    .input-group input:focus, .input-group select:focus {
      border-color: var(--primary);
      outline: none;
    }
    
    .input-group .range-value {
      font-weight: 600;
      color: var(--primary);
      display: block;
      margin-top: 6px;
    }
    
    .gender-group {
      display: flex;
      gap: 20px;
      margin-top: 10px;
    }
    
    .gender-option {
      flex: 1;
      text-align: center;
      padding: 15px;
      border: 2px solid var(--gray);
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .gender-option.selected {
      border-color: var(--primary);
      background: #e1f0fa;
    }
    
    .height-inputs {
      display: flex;
      gap: 10px;
    }
    
    .height-inputs > div {
      flex: 1;
    }
    
    .btn-calculate {
      background: var(--primary);
      color: white;
      border: none;
      padding: 15px 25px;
      font-size: 1.1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
      font-weight: 600;
      margin-top: 20px;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .btn-calculate:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .results {
      margin-top: 30px;
      padding: 25px;
      background: #f8f9fa;
      border-radius: 10px;
      border-left: 4px solid var(--primary);
      display: none;
    }
    
    .results.active {
      display: block;
      animation: slideIn 0.5s ease;
    }
    
    .results h3 {
      color: var(--primary;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .result-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 15px;
    }
    
    .result-card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
      text-align: center;
      transition: transform 0.3s;
    }
    
    .result-card:hover {
      transform: translateY(-5px);
    }
    
    .result-card h4 {
      color: #666;
      margin-bottom: 10px;
      font-size: 1rem;
    }
    
    .result-card .value {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .result-card .unit {
      font-size: 1rem;
      color: #777;
    }
    
    .interpretation {
      margin-top: 20px;
      padding: 15px;
      background: #e1f0fa;
      border-radius: 8px;
      font-size: 1rem;
      line-height: 1.6;
    }
    
    .progress-container {
      height: 10px;
      background: #e0e0e0;
      border-radius: 5px;
      margin-top: 10px;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: var(--accent);
      border-radius: 5px;
    }
    
    .macro-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .macro-card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
    }
    
    .macro-card h4 {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--primary);
      margin-bottom: 15px;
    }
    
    .macro-card .macro-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    /* Enhanced Calorie Calculator Styles */
    .calorie-calculator-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    .calorie-input-section {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid var(--gray);
    }
    
    .calorie-preview-section {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
      border: 1px solid var(--gray);
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .calorie-preview-card {
      text-align: center;
      padding: 20px;
      background: linear-gradient(135deg, #1a73e8, #2ecc71);
      border-radius: 10px;
      margin-bottom: 20px;
      color: white;
    }
    
    .calorie-preview-card h4 {
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: white;
    }
    
    .calorie-preview-card .value {
      font-size: 2.5rem;
      font-weight: 700;
      color: white;
    }
    
    .calorie-preview-card .unit {
      font-size: 1.2rem;
      color: rgba(255, 255, 255, 0.8);
    }
    
    .calorie-progress {
      margin-top: 20px;
    }
    
    .calorie-progress-bar {
      height: 20px;
      background: #e0e0e0;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }
    
    .calorie-progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      border-radius: 10px;
      width: 0%;
      transition: width 1s ease;
    }
    
    .calorie-progress-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 0.9rem;
      color: #777;
    }
    
    .calorie-goal-card {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: white;
      border-radius: 8px;
      margin-top: 10px;
      border-left: 4px solid var(--success);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    
    .calorie-goal-card.warning {
      border-left-color: var(--warning);
    }
    
    .calorie-goal-card.danger {
      border-left-color: var(--danger);
    }
    
    .goal-icon {
      font-size: 1.8rem;
      color: var(--success);
    }
    
    .calorie-goal-card.warning .goal-icon {
      color: var(--warning);
    }
    
    .calorie-goal-card.danger .goal-icon {
      color: var(--danger);
    }
    
    .goal-text {
      flex: 1;
    }
    
    .goal-text h4 {
      color: var(--dark);
      margin-bottom: 5px;
    }
    
    .goal-text p {
      font-size: 0.9rem;
      color: #777;
    }
    
    .goal-value {
      font-weight: 700;
      font-size: 1.2rem;
      color: var(--dark);
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideIn {
      from { 
        opacity: 0;
        transform: translateY(20px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Responsive design enhancements */
    @media (max-width: 992px) {
      header h1 {
        font-size: 2.4rem;
      }
      
      .input-row {
        flex-direction: column;
        gap: 15px;
      }
      
      .gender-group {
        flex-direction: column;
      }
      
      .height-inputs {
        flex-direction: column;
        gap: 10px;
      }
      
      .calorie-calculator-container {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 768px) {
      .tabs-container {
        flex-direction: column;
      }
      
      .tab-buttons {
        flex-direction: row;
        overflow-x: auto;
        padding-bottom: 10px;
        scrollbar-width: thin;
      }
      
      .tab-btn {
        min-width: 100px;
        padding: 12px 15px;
        font-size: 0.9rem;
        text-align: center;
        flex-direction: column;
        gap: 5px;
      }
      
      .tab-btn i {
        font-size: 1.1rem;
      }
      
      header h1 {
        font-size: 2.0rem;
      }
      
      .content {
        padding: 20px;
      }
      
      .tab-content h2 {
        font-size: 1.5rem;
      }
      
      .result-grid, .macro-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 480px) {
      body {
        padding: 10px;
      }
      
      header {
        padding: 20px 10px;
      }
      
      header h1 {
        font-size: 1.8rem;
      }
      
      .tab-btn {
        min-width: 80px;
        padding: 10px;
        font-size: 0.8rem;
      }
      
      .result-card .value {
        font-size: 1.5rem;
      }
      
      .calorie-preview-card .value {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>

  <!-- Navbar placeholder -->
  <div id="navbar-container"></div>

  <div class="container">
    <header>
      <h1><i class="fas fa-calculator"></i> Fitness Calculator Suite</h1>
      <p>Your complete fitness toolkit with 9 essential calculators for health and nutrition</p>
    </header>
    
    <div class="tabs-container">
      <div class="tabs">
        <div class="tab-buttons">
          <button class="tab-btn active" data-tab="bmr"><i class="fas fa-fire"></i> BMR</button>
          <button class="tab-btn" data-tab="bmi"><i class="fas fa-weight-scale"></i> BMI</button>
          <button class="tab-btn" data-tab="calories"><i class="fas fa-apple-whole"></i> Calories</button>
          <button class="tab-btn" data-tab="bodyfat"><i class="fas fa-person"></i> Body Fat</button>
          <button class="tab-btn" data-tab="ideal"><i class="fas fa-weight-hanging"></i> Ideal Weight</button>
          <button class="tab-btn" data-tab="macro"><i class="fas fa-carrot"></i> Macros</button>
          <button class="tab-btn" data-tab="water"><i class="fas fa-tint"></i> Water</button>
          <button class="tab-btn" data-tab="whr"><i class="fas fa-ruler-combined"></i> WHR</button>
          <button class="tab-btn" data-tab="lbm"><i class="fas fa-dumbbell"></i> LBM</button>
        </div>
      </div>
      
      <div class="content">
        <!-- BMR Calculator (now active) -->
        <div id="bmr" class="tab-content active">
          <h2><i class="fas fa-fire"></i> Basal Metabolic Rate (BMR)</h2>
          <div class="calculator-info">
            <p>BMR is the number of calories your body needs at rest to maintain basic functions. It represents the minimum energy required to keep your body functioning. Knowing your BMR is essential for creating effective weight management plans.</p>
          </div>
          <div class="input-group">
            <label>Gender</label>
            <div class="gender-group">
              <div class="gender-option selected" data-gender="male">Male</div>
              <div class="gender-option" data-gender="female">Female</div>
            </div>
          </div>
          <div class="input-row">
            <div class="input-group">
              <label for="bmrAge">Age: <span class="range-value" id="bmrAgeVal">30</span> years</label>
              <input type="range" id="bmrAge" min="15" max="80" value="30" oninput="bmrAgeVal.innerText=this.value">
            </div>
            <div class="input-group">
              <label>Height</label>
              <div class="height-inputs">
                <div>
                  <label for="bmrFeet">Feet</label>
                  <input type="number" id="bmrFeet" min="4" max="7" value="5">
                </div>
                <div>
                  <label for="bmrInches">Inches</label>
                  <input type="number" id="bmrInches" min="0" max="11" value="7">
                </div>
              </div>
            </div>
            <div class="input-group">
              <label for="bmrWeight">Weight: <span class="range-value" id="bmrWeightVal">70</span> kg</label>
              <input type="range" id="bmrWeight" min="30" max="200" value="70" oninput="bmrWeightVal.innerText=this.value">
            </div>
          </div>
          <div class="input-group">
            <label for="bmrActivity">Activity Level</label>
            <select id="bmrActivity">
              <option value="1.2">Sedentary (little or no exercise)</option>
              <option value="1.375">Lightly active (light exercise 1-3 days/week)</option>
              <option value="1.55" selected>Moderately active (moderate exercise 3-5 days/week)</option>
              <option value="1.725">Very active (hard exercise 6-7 days/week)</option>
              <option value="1.9">Extra active (very hard exercise & physical job)</option>
            </select>
          </div>
          <button class="btn-calculate" onclick="calcBMR()">
            <i class="fas fa-calculator"></i> Calculate BMR
          </button>
          
          <div class="results" id="bmrResults">
            <h3><i class="fas fa-chart-line"></i> Your Results</h3>
            <div class="result-grid">
              <div class="result-card">
                <h4>BMR</h4>
                <div class="value" id="bmrValue">1,650</div>
                <div class="unit">calories/day</div>
              </div>
              <div class="result-card">
                <h4>TDEE</h4>
                <div class="value" id="tdeeValue">2,300</div>
                <div class="unit">calories/day</div>
              </div>
              <div class="result-card">
                <h4>Daily Activity</h4>
                <div class="value" id="activityMultiplier">1.55x</div>
                <div class="unit">multiplier</div>
              </div>
              <div class="result-card">
                <h4>Daily Calories</h4>
                <div class="value" id="dailyCalories">3,565</div>
                <div class="unit">calories/day</div>
              </div>
            </div>
            <div class="interpretation">
              <p><strong>BMR (Basal Metabolic Rate)</strong> is the calories your body needs at rest. <strong>TDEE (Total Daily Energy Expenditure)</strong> is your total calories burned including activity. Use TDEE to determine your daily calorie needs.</p>
              <p style="margin-top: 10px;"><strong>Your Activity Level:</strong> You've selected "Moderately active" which means you exercise 3-5 times per week. This multiplier (1.55x) is applied to your BMR to calculate your TDEE.</p>
            </div>
          </div>
        </div>
        
        <!-- Calories Calculator -->
        <div id="calories" class="tab-content">
          <h2><i class="fas fa-apple-whole"></i> Daily Calorie Needs Calculator</h2>
          <div class="calculator-info">
            <p>Calculate your personalized daily calorie needs based on your body metrics, activity level, and fitness goals. This comprehensive calculator helps you determine exactly how many calories to consume to maintain, lose, or gain weight effectively.</p>
          </div>
          
          <div class="calorie-calculator-container">
            <div class="calorie-input-section">
              <h3><i class="fas fa-user"></i> Personal Information</h3>
              <div class="input-row">
                <div class="input-group">
                  <label>Gender</label>
                  <div class="gender-group">
                    <div class="gender-option selected" data-gender="male">Male</div>
                    <div class="gender-option" data-gender="female">Female</div>
                  </div>
                </div>
                <div class="input-group">
                  <label for="calAge">Age: <span class="range-value" id="calAgeVal">30</span> years</label>
                  <input type="range" id="calAge" min="15" max="80" value="30" oninput="calAgeVal.innerText=this.value">
                </div>
              </div>
              
              <div class="input-row">
                <div class="input-group">
                  <label>Height</label>
                  <div class="height-inputs">
                    <div>
                      <label for="calFeet">Feet</label>
                      <input type="number" id="calFeet" min="4" max="7" value="5">
                    </div>
                    <div>
                      <label for="calInches">Inches</label>
                      <input type="number" id="calInches" min="0" max="11" value="7">
                    </div>
                  </div>
                </div>
                <div class="input-group">
                  <label for="calWeight">Weight: <span class="range-value" id="calWeightVal">70</span> kg</label>
                  <input type="range" id="calWeight" min="30" max="200" value="70" oninput="calWeightVal.innerText=this.value">
                </div>
              </div>
              
              <h3 style="margin-top: 25px;"><i class="fas fa-running"></i> Activity Level</h3>
              <div class="input-group">
                <select id="calActivity">
                  <option value="1.2">Sedentary (little or no exercise)</option>
                  <option value="1.375">Lightly active (light exercise 1-3 days/week)</option>
                  <option value="1.55" selected>Moderately active (moderate exercise 3-5 days/week)</option>
                  <option value="1.725">Very active (hard exercise 6-7 days/week)</option>
                  <option value="1.9">Extra active (very hard exercise & physical job)</option>
                </select>
              </div>
              
              <h3 style="margin-top: 25px;"><i class="fas fa-bullseye"></i> Fitness Goal</h3>
              <div class="input-group">
                <select id="calGoal">
                  <option value="maintain">Maintain Weight</option>
                  <option value="lose">Lose Weight (0.5kg/week)</option>
                  <option value="lose2">Lose Weight (1kg/week)</option>
                  <option value="gain">Gain Weight (0.5kg/week)</option>
                  <option value="gain2">Gain Weight (1kg/week)</option>
                </select>
              </div>
              
              <button class="btn-calculate" onclick="calcCalories()" style="margin-top: 30px;">
                <i class="fas fa-calculator"></i> Calculate My Calorie Needs
              </button>
            </div>
            
            <div class="calorie-preview-section">
              <div class="calorie-preview-card">
                <h4>Your Daily Calorie Target</h4>
                <div class="value" id="previewCalories">2,000</div>
                <div class="unit">calories/day</div>
              </div>
              
              <div class="calorie-progress">
                <h4><i class="fas fa-tachometer-alt"></i> Goal Progress</h4>
                <div class="calorie-progress-bar">
                  <div class="calorie-progress-fill" id="calorieProgress" style="width: 65%"></div>
                </div>
                <div class="calorie-progress-labels">
                  <span>Start</span>
                  <span>Current</span>
                  <span>Goal</span>
                </div>
              </div>
              
              <div class="calorie-goal-card">
                <div class="goal-icon">
                  <i class="fas fa-weight"></i>
                </div>
                <div class="goal-text">
                  <h4>Weight Goal</h4>
                  <p>Lose 0.5kg per week</p>
                </div>
                <div class="goal-value">-500</div>
              </div>
              
              <div class="calorie-goal-card warning">
                <div class="goal-icon">
                  <i class="fas fa-fire"></i>
                </div>
                <div class="goal-text">
                  <h4>Calorie Deficit</h4>
                  <p>Daily calorie reduction</p>
                </div>
                <div class="goal-value">500</div>
              </div>
              
              <div class="calorie-goal-card danger">
                <div class="goal-icon">
                  <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="goal-text">
                  <h4>Minimum Calories</h4>
                  <p>Do not go below</p>
                </div>
                <div class="goal-value">1,500</div>
              </div>
            </div>
          </div>
          
          <div class="results" id="calorieResults">
            <h3><i class="fas fa-chart-line"></i> Your Calorie Analysis</h3>
            <div class="result-grid">
              <div class="result-card">
                <h4>Basal Metabolic Rate</h4>
                <div class="value" id="bmrResult">1,650</div>
                <div class="unit">calories/day</div>
              </div>
              <div class="result-card">
                <h4>Total Daily Expenditure</h4>
                <div class="value" id="tdeeResult">2,300</div>
                <div class="unit">calories/day</div>
              </div>
              <div class="result-card">
                <h4>Your Target Calories</h4>
                <div class="value" id="targetCalories">1,800</div>
                <div class="unit">calories/day</div>
              </div>
              <div class="result-card">
                <h4>Weekly Weight Change</h4>
                <div class="value" id="weightChange">-0.5</div>
                <div class="unit">kg/week</div>
              </div>
            </div>
            
            <div class="interpretation">
              <p><strong>Results Analysis:</strong> Your Basal Metabolic Rate (BMR) is the calories your body needs at rest. Total Daily Energy Expenditure (TDEE) includes your activity level. For weight loss, we've created a calorie deficit of 500 calories/day which should result in about 0.5kg loss per week. For weight gain, add 500 calories/day for 0.5kg gain per week.</p>
              <p style="margin-top: 10px;"><strong>Important:</strong> Never consume fewer than 1,500 calories/day (men) or 1,200 calories/day (women) without medical supervision. Extreme calorie restriction can slow your metabolism and cause muscle loss.</p>
            </div>
            
            <h3 style="margin-top: 30px;"><i class="fas fa-utensils"></i> Meal Planning Suggestions</h3>
            <div class="macro-grid">
              <div class="macro-card">
                <h4><i class="fas fa-egg"></i> Breakfast</h4>
                <div class="macro-value">400-500 cal</div>
                <p>High protein, moderate carbs</p>
              </div>
              <div class="macro-card">
                <h4><i class="fas fa-apple-alt"></i> Lunch</h4>
                <div class="macro-value">500-600 cal</div>
                <p>Lean protein, complex carbs</p>
              </div>
              <div class="macro-card">
                <h4><i class="fas fa-drumstick-bite"></i> Dinner</h4>
                <div class="macro-value">500-600 cal</div>
                <p>Lean protein, vegetables</p>
              </div>
              <div class="macro-card">
                <h4><i class="fas fa-seedling"></i> Snacks</h4>
                <div class="macro-value">200-300 cal</div>
                <p>Fruits, nuts, yogurt</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- BMI Calculator -->
        <div id="bmi" class="tab-content">
          <h2><i class="fas fa-weight-scale"></i> Body Mass Index (BMI)</h2>
          <div class="calculator-info">
            <p>BMI is a measure of body fat based on height and weight. It provides a reliable indicator of body fatness for most people.</p>
          </div>
          <div class="input-row">
            <div class="input-group">
              <label>Height</label>
              <div class="height-inputs">
                <div>
                  <label for="bmiFeet">Feet</label>
                  <input type="number" id="bmiFeet" min="4" max="7" value="5">
                </div>
                <div>
                  <label for="bmiInches">Inches</label>
                  <input type="number" id="bmiInches" min="0" max="11" value="7">
                </div>
              </div>
            </div>
            <div class="input-group">
              <label for="bmiWeight">Weight: <span class="range-value" id="bmiWeightVal">70</span> kg</label>
              <input type="range" id="bmiWeight" min="30" max="200" value="70" oninput="bmiWeightVal.innerText=this.value">
            </div>
          </div>
          <button class="btn-calculate" onclick="calcBMI()">
            <i class="fas fa-calculator"></i> Calculate BMI
          </button>
          
          <div class="results" id="bmiResults">
            <h3><i class="fas fa-chart-line"></i> Your Results</h3>
            <div class="result-grid">
              <div class="result-card">
                <h4>BMI</h4>
                <div class="value" id="bmiValue">--</div>
                <div class="unit">kg/m²</div>
              </div>
              <div class="result-card">
                <h4>Category</h4>
                <div class="value" id="bmiCategory">--</div>
              </div>
            </div>
            <div class="interpretation">
              <p><strong>BMI Categories:</strong> Underweight = &lt;18.5, Normal weight = 18.5–24.9, Overweight = 25–29.9, Obesity = 30 or greater. Note that BMI may not accurately reflect body composition for athletes with high muscle mass.</p>
            </div>
          </div>
        </div>
        
        <!-- Body Fat Calculator -->
        <div id="bodyfat" class="tab-content">
          <h2><i class="fas fa-person"></i> Body Fat Percentage</h2>
          <div class="calculator-info">
            <p>Calculate your body fat percentage using the U.S. Navy method. This measurement helps assess your body composition and health risks.</p>
          </div>
          <div class="input-group">
            <label>Gender</label>
            <div class="gender-group">
              <div class="gender-option selected" data-gender="male">Male</div>
              <div class="gender-option" data-gender="female">Female</div>
            </div>
          </div>
          <div class="input-row">
            <div class="input-group">
              <label>Height</label>
              <div class="height-inputs">
                <div>
                  <label for="bfFeet">Feet</label>
                  <input type="number" id="bfFeet" min="4" max="7" value="5">
                </div>
                <div>
                  <label for="bfInches">Inches</label>
                  <input type="number" id="bfInches" min="0" max="11" value="7">
                </div>
              </div>
            </div>
            <div class="input-group">
              <label for="neck">Neck: <span class="range-value" id="neckVal">38</span> cm</label>
              <input type="range" id="neck" min="20" max="60" value="38" oninput="neckVal.innerText=this.value">
            </div>
            <div class="input-group">
              <label for="waist">Waist: <span class="range-value" id="waistVal">80</span> cm</label>
              <input type="range" id="waist" min="50" max="150" value="80" oninput="waistVal.innerText=this.value">
            </div>
          </div>
          <div class="input-row" id="hipContainer" style="display: none;">
            <div class="input-group">
              <label for="hip">Hip: <span class="range-value" id="hipVal">95</span> cm</label>
              <input type="range" id="hip" min="60" max="150" value="95" oninput="hipVal.innerText=this.value">
            </div>
          </div>
          <button class="btn-calculate" onclick="calcBodyFat()">
            <i class="fas fa-percent"></i> Calculate Body Fat
          </button>
          
          <div class="results" id="bodyfatResults">
            <h3><i class="fas fa-chart-line"></i> Your Results</h3>
            <div class="result-grid">
              <div class="result-card">
                <h4>Body Fat %</h4>
                <div class="value" id="bodyfatValue">--</div>
                <div class="unit">percentage</div>
              </div>
              <div class="result-card">
                <h4>Category</h4>
                <div class="value" id="bodyfatCategory">--</div>
              </div>
            </div>
            <div class="interpretation">
              <p><strong>Body Fat Categories:</strong> For men: Essential 2-5%, Athlete 6-13%, Fitness 14-17%, Average 18-24%, Obese 25%+. For women: Essential 10-13%, Athlete 14-20%, Fitness 21-24%, Average 25-31%, Obese 32%+.</p>
            </div>
          </div>
        </div>
        
        <!-- Ideal Weight Calculator -->
        <div id="ideal" class="tab-content">
          <h2><i class="fas fa-weight-hanging"></i> Ideal Weight</h2>
          <div class="calculator-info">
            <p>Determine your ideal body weight based on your height and gender. This calculation uses the Devine formula, a widely accepted method for estimating ideal weight.</p>
          </div>
          <div class="input-group">
            <label>Gender</label>
            <div class="gender-group">
              <div class="gender-option selected" data-gender="male">Male</div>
              <div class="gender-option" data-gender="female">Female</div>
            </div>
          </div>
          <div class="input-row">
            <div class="input-group">
              <label>Height</label>
              <div class="height-inputs">
                <div>
                  <label for="iwFeet">Feet</label>
                  <input type="number" id="iwFeet" min="4" max="7" value="5">
                </div>
                <div>
                  <label for="iwInches">Inches</label>
                  <input type="number" id="iwInches" min="0" max="11" value="7">
                </div>
              </div>
            </div>
          </div>
          <button class="btn-calculate" onclick="calcIdealWeight()">
            <i class="fas fa-weight-scale"></i> Calculate Ideal Weight
          </button>
          
          <div class="results" id="idealWeightResults">
            <h3><i class="fas fa-chart-line"></i> Your Results</h3>
            <div class="result-grid">
              <div class="result-card">
                <h4>Ideal Weight</h4>
                <div class="value" id="idealWeightValue">--</div>
                <div class="unit">kilograms</div>
              </div>
              <div class="result-card">
                <h4>Healthy Range</h4>
                <div class="value" id="idealWeightRange">--</div>
                <div class="unit">kilograms</div>
              </div>
            </div>
            <div class="interpretation">
              <p><strong>Note:</strong> Ideal weight is an estimation based on height and gender. A healthy weight range is typically ±10% of the ideal weight. Individual factors like muscle mass and body composition can affect what weight is ideal for you.</p>
            </div>
          </div>
        </div>
        
        <!-- Macronutrients Calculator -->
        <div id="macro" class="tab-content">
          <h2><i class="fas fa-carrot"></i> Macronutrients</h2>
          <div class="calculator-info">
            <p>Calculate your optimal macronutrient distribution based on your calorie needs and fitness goals. This helps you balance your intake of proteins, carbohydrates, and fats.</p>
          </div>
          <div class="input-row">
            <div class="input-group">
              <label for="dailyCalories">Daily Calories</label>
              <input type="number" id="dailyCalories" placeholder="Enter daily calories" value="2000">
            </div>
            <div class="input-group">
              <label for="dietGoal">Diet Goal</label>
              <select id="dietGoal">
                <option value="balanced">Balanced Diet</option>
                <option value="lowcarb">Low-Carb Diet</option>
                <option value="highprotein">High-Protein Diet</option>
                <option value="keto">Keto Diet</option>
              </select>
            </div>
          </div>
          <button class="btn-calculate" onclick="calcMacros()">
            <i class="fas fa-calculator"></i> Calculate Macros
          </button>
          
          <div class="results" id="macrosResults">
            <h3><i class="fas fa-chart-pie"></i> Your Macronutrient Distribution</h3>
            <div class="macro-grid">
              <div class="macro-card">
                <h4><i class="fas fa-drumstick-bite"></i> Protein</h4>
                <div class="macro-value" id="proteinValue">-- g</div>
                <div class="progress-container">
                  <div class="progress-bar" id="proteinBar" style="width: 30%"></div>
                </div>
                <p class="macro-desc">4 calories per gram. Essential for muscle building and repair.</p>
              </div>
              <div class="macro-card">
                <h4><i class="fas fa-bread-slice"></i> Carbohydrates</h4>
                <div class="macro-value" id="carbsValue">-- g</div>
                <div class="progress-container">
                  <div class="progress-bar" id="carbsBar" style="width: 50%"></div>
                </div>
                <p class="macro-desc">4 calories per gram. Primary energy source for your body.</p>
              </div>
              <div class="macro-card">
                <h4><i class="fas fa-bacon"></i> Fats</h4>
                <div class="macro-value" id="fatsValue">-- g</div>
                <div class="progress-container">
                  <div class="progress-bar" id="fatsBar" style="width: 20%"></div>
                </div>
                <p class="macro-desc">9 calories per gram. Important for hormone production and nutrient absorption.</p>
              </div>
            </div>
            <div class="interpretation">
              <p><strong>Recommendations:</strong> Adjust your macro ratios based on your fitness goals. Athletes may need more protein for muscle recovery, while endurance athletes benefit from higher carb intake. Consult a nutritionist for personalized advice.</p>
            </div>
          </div>
        </div>
        
        <!-- Water Calculator -->
        <div id="water" class="tab-content">
          <h2><i class="fas fa-tint"></i> Water Intake</h2>
          <div class="calculator-info">
            <p>Calculate your recommended daily water intake based on your weight and activity level. Proper hydration is essential for optimal bodily functions.</p>
          </div>
          <div class="input-row">
            <div class="input-group">
              <label for="waterWeight">Weight: <span class="range-value" id="waterWeightVal">70</span> kg</label>
              <input type="range" id="waterWeight" min="30" max="200" value="70" oninput="waterWeightVal.innerText=this.value">
            </div>
            <div class="input-group">
              <label for="activityLevelWater">Activity Level</label>
              <select id="activityLevelWater">
                <option value="1">Sedentary</option>
                <option value="1.2">Light Activity</option>
                <option value="1.5" selected>Moderate Activity</option>
                <option value="1.8">High Activity</option>
                <option value="2">Extreme Activity</option>
              </select>
            </div>
          </div>
          <button class="btn-calculate" onclick="calcWater()">
            <i class="fas fa-tint"></i> Calculate Water Needs
          </button>
          
          <div class="results" id="waterResults">
            <h3><i class="fas fa-chart-line"></i> Your Results</h3>
            <div class="result-grid">
              <div class="result-card">
                <h4>Daily Water</h4>
                <div class="value" id="waterValue">--</div>
                <div class="unit">liters/day</div>
              </div>
              <div class="result-card">
                <h4>Bottles (500ml)</h4>
                <div class="value" id="bottlesValue">--</div>
              </div>
            </div>
            <div class="interpretation">
              <p><strong>Note:</strong> The standard recommendation is 30-35ml per kg of body weight. Adjust based on activity level, climate, and individual needs. Remember that about 20% of your water intake comes from food.</p>
            </div>
          </div>
        </div>
        
        <!-- WHR Calculator -->
        <div id="whr" class="tab-content">
          <h2><i class="fas fa-ruler-combined"></i> Waist-to-Hip Ratio</h2>
          <div class="calculator-info">
            <p>Waist-to-Hip Ratio (WHR) is a measurement that compares the size of your waist to that of your hips. It's used as an indicator of health and risk of developing serious health conditions.</p>
          </div>
          <div class="input-row">
            <div class="input-group">
              <label for="waistWhr">Waist: <span class="range-value" id="waistWhrVal">80</span> cm</label>
              <input type="range" id="waistWhr" min="50" max="150" value="80" oninput="waistWhrVal.innerText=this.value">
            </div>
            <div class="input-group">
              <label for="hipWhr">Hip: <span class="range-value" id="hipWhrVal">95</span> cm</label>
              <input type="range" id="hipWhr" min="60" max="150" value="95" oninput="hipWhrVal.innerText=this.value">
            </div>
          </div>
          <button class="btn-calculate" onclick="calcWHR()">
            <i class="fas fa-calculator"></i> Calculate WHR
          </button>
          
          <div class="results" id="whrResults">
            <h3><i class="fas fa-chart-line"></i> Your Results</h3>
            <div class="result-grid">
              <div class="result-card">
                <h4>WHR Ratio</h4>
                <div class="value" id="whrValue">--</div>
              </div>
              <div class="result-card">
                <h4>Health Risk</h4>
                <div class="value" id="whrRisk">--</div>
              </div>
            </div>
            <div class="interpretation">
              <p><strong>Health Guidelines:</strong> For men: Low risk (&lt;0.95), Moderate risk (0.96-1.0), High risk (&gt;1.0). For women: Low risk (&lt;0.80), Moderate risk (0.81-0.85), High risk (&gt;0.85). Higher ratios indicate increased health risks.</p>
            </div>
          </div>
        </div>
        
        <!-- LBM Calculator -->
        <div id="lbm" class="tab-content">
          <h2><i class="fas fa-dumbbell"></i> Lean Body Mass</h2>
          <div class="calculator-info">
            <p>Lean Body Mass (LBM) is the total weight of your body minus all the weight due to your fat mass. It includes muscles, bones, organs and water.</p>
          </div>
          <div class="input-group">
            <label>Gender</label>
            <div class="gender-group">
              <div class="gender-option selected" data-gender="male">Male</div>
              <div class="gender-option" data-gender="female">Female</div>
            </div>
          </div>
          <div class="input-row">
            <div class="input-group">
              <label>Height</label>
              <div class="height-inputs">
                <div>
                  <label for="lbmFeet">Feet</label>
                  <input type="number" id="lbmFeet" min="4" max="7" value="5">
                </div>
                <div>
                  <label for="lbmInches">Inches</label>
                  <input type="number" id="lbmInches" min="0" max="11" value="7">
                </div>
              </div>
            </div>
            <div class="input-group">
              <label for="lbmWeight">Weight: <span class="range-value" id="lbmWeightVal">70</span> kg</label>
              <input type="range" id="lbmWeight" min="30" max="200" value="70" oninput="lbmWeightVal.innerText=this.value">
            </div>
          </div>
          <button class="btn-calculate" onclick="calcLBM()">
            <i class="fas fa-calculator"></i> Calculate LBM
          </button>
          
          <div class="results" id="lbmResults">
            <h3><i class="fas fa-chart-line"></i> Your Results</h3>
            <div class="result-grid">
              <div class="result-card">
                <h4>Lean Body Mass</h4>
                <div class="value" id="lbmValue">--</div>
                <div class="unit">kilograms</div>
              </div>
              <div class="result-card">
                <h4>Body Fat Mass</h4>
                <div class="value" id="fatMassValue">--</div>
                <div class="unit">kilograms</div>
              </div>
            </div>
            <div class="interpretation">
              <p><strong>Lean Body Mass</strong> represents everything in your body except fat. Higher LBM generally indicates better metabolic health and physical fitness. Maintaining or increasing LBM is important for long-term health and weight management.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Footer placeholder -->
    <div id="footer-container"></div>
  </div>

  <script>
    // Function to initialize the calculator app
    function initApp() {
      // Helper function to convert feet/inches to cm
      function convertToCm(feet, inches) {
        return (feet * 30.48) + (inches * 2.54);
      }

      // Tab switching functionality
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          // Remove active class from all tabs
          document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
          // Add active class to clicked tab
          btn.classList.add('active');
          
          // Hide all calculators
          document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
          
          // Show the calculator corresponding to the clicked tab
          const tabId = btn.getAttribute('data-tab');
          document.getElementById(tabId).classList.add('active');
        });
      });
      
      // Gender selection functionality
      document.querySelectorAll('.gender-option').forEach(option => {
        option.addEventListener('click', () => {
          // Find the parent calculator
          const calculator = option.closest('.tab-content');
          
          // Remove selected class from all gender options in this calculator
          const siblings = calculator.querySelectorAll('.gender-option');
          siblings.forEach(sib => sib.classList.remove('selected'));
          
          // Add selected class to clicked option
          option.classList.add('selected');
          
          // Special handling for body fat calculator
          if (calculator.id === 'bodyfat') {
            const gender = option.getAttribute('data-gender');
            const hipContainer = document.getElementById('hipContainer');
            if (gender === 'female') {
              hipContainer.style.display = 'flex';
            } else {
              hipContainer.style.display = 'none';
            }
          }
        });
      });
      
      // Calorie Needs Calculator - Enhanced
      function calcCalories() {
        // Get inputs
        const age = +document.getElementById('calAge').value;
        const feet = +document.getElementById('calFeet').value;
        const inches = +document.getElementById('calInches').value;
        const height = convertToCm(feet, inches);
        const weight = +document.getElementById('calWeight').value;
        const gender = document.querySelector('#calories .gender-option.selected').getAttribute('data-gender');
        const activity = +document.getElementById('calActivity').value;
        const goal = document.getElementById('calGoal').value;
        
        // Calculate BMR
        let bmr = 0;
        if (gender === 'male') {
          bmr = 10 * weight + 6.25 * height - 5 * age + 5;
        } else {
          bmr = 10 * weight + 6.25 * height - 5 * age - 161;
        }
        
        // Calculate TDEE
        const tdee = Math.round(bmr * activity);
        
        // Calculate target calories based on goal
        let targetCalories = tdee;
        let weightChange = 0;
        let goalText = "Maintain Weight";
        
        if (goal === 'lose') {
          targetCalories = tdee - 500;
          weightChange = -0.5;
          goalText = "Lose 0.5kg/week";
        } else if (goal === 'lose2') {
          targetCalories = tdee - 1000;
          weightChange = -1;
          goalText = "Lose 1kg/week";
        } else if (goal === 'gain') {
          targetCalories = tdee + 500;
          weightChange = 0.5;
          goalText = "Gain 0.5kg/week";
        } else if (goal === 'gain2') {
          targetCalories = tdee + 1000;
          weightChange = 1;
          goalText = "Gain 1kg/week";
        }
        
        // Ensure minimum calories
        const minCalories = gender === 'male' ? 1500 : 1200;
        if (targetCalories < minCalories) targetCalories = minCalories;
        
        // Update preview values
        document.getElementById('previewCalories').textContent = targetCalories.toLocaleString();
        
        // Update progress bar based on goal
        let progress = 65; // default for maintenance
        if (goal.includes('lose')) progress = 35;
        if (goal.includes('gain')) progress = 85;
        document.getElementById('calorieProgress').style.width = `${progress}%`;
        
        // Update goal cards
        document.querySelector('.goal-text h4').textContent = "Weight Goal";
        document.querySelector('.goal-text p').textContent = goalText;
        document.querySelector('.goal-value').textContent = weightChange > 0 ? `+${weightChange}` : weightChange;
        
        // Update results
        document.getElementById('bmrResult').textContent = Math.round(bmr).toLocaleString();
        document.getElementById('tdeeResult').textContent = tdee.toLocaleString();
        document.getElementById('targetCalories').textContent = targetCalories.toLocaleString();
        document.getElementById('weightChange').textContent = weightChange;
        
        // Show results section
        document.getElementById('calorieResults').classList.add('active');
        
        // Scroll to results
        document.getElementById('calorieResults').scrollIntoView({ behavior: 'smooth' });
      }
      
      // BMR Calculator function
      function calcBMR() {
        const age = +document.getElementById('bmrAge').value;
        const feet = +document.getElementById('bmrFeet').value;
        const inches = +document.getElementById('bmrInches').value;
        const height = convertToCm(feet, inches);
        const weight = +document.getElementById('bmrWeight').value;
        const gender = document.querySelector('#bmr .gender-option.selected').getAttribute('data-gender');
        const activity = +document.getElementById('bmrActivity').value;
        
        let bmr = 0;
        if (gender === 'male') {
          bmr = 10 * weight + 6.25 * height - 5 * age + 5;
        } else {
          bmr = 10 * weight + 6.25 * height - 5 * age - 161;
        }
        
        const tdee = Math.round(bmr * activity);
        
        // Get selected activity level text
        const activitySelect = document.getElementById('bmrActivity');
        const selectedOption = activitySelect.options[activitySelect.selectedIndex].text;
        const activityName = selectedOption.split(' ')[0]; // Get the first word
        
        // Display results
        document.getElementById('bmrValue').textContent = Math.round(bmr).toLocaleString();
        document.getElementById('tdeeValue').textContent = tdee.toLocaleString();
        document.getElementById('activityMultiplier').textContent = activity;
        document.getElementById('dailyCalories').textContent = tdee.toLocaleString();
        
        // Show results section
        document.getElementById('bmrResults').classList.add('active');
        
        // Scroll to results
        document.getElementById('bmrResults').scrollIntoView({ behavior: 'smooth' });
      }
      
      function calcBMI() {
        const feet = +document.getElementById('bmiFeet').value;
        const inches = +document.getElementById('bmiInches').value;
        const height = convertToCm(feet, inches) / 100; // convert to meters
        const weight = +document.getElementById('bmiWeight').value;
        
        if (!height || !weight) {
          alert('Please enter both height and weight.');
          return;
        }
        
        // Calculate BMI
        const bmi = weight / (height * height);
        
        // Determine category
        let category;
        if (bmi < 18.5) {
          category = 'Underweight';
        } else if (bmi < 25) {
          category = 'Normal weight';
        } else if (bmi < 30) {
          category = 'Overweight';
        } else {
          category = 'Obesity';
        }
        
        // Display results
        document.getElementById('bmiValue').textContent = bmi.toFixed(1);
        document.getElementById('bmiCategory').textContent = category;
        document.getElementById('bmiResults').classList.add('active');
      }
      
      function calcBodyFat() {
        const feet = +document.getElementById('bfFeet').value;
        const inches = +document.getElementById('bfInches').value;
        const height = convertToCm(feet, inches);
        const neck = +document.getElementById('neck').value;
        const waist = +document.getElementById('waist').value;
        
        if (!height || !neck || !waist) {
          alert('Please enter all required measurements.');
          return;
        }
        
        // Get selected gender
        const genderOption = document.querySelector('#bodyfat .gender-option.selected');
        const gender = genderOption.getAttribute('data-gender');
        
        let bodyFat;
        if (gender === 'male') {
          // US Navy method for men
          bodyFat = 86.010 * Math.log10(waist - neck) - 70.041 * Math.log10(height) + 36.76;
        } else {
          const hip = parseFloat(document.getElementById('hip').value);
          if (!hip) {
            alert('Please enter hip measurement for female calculation.');
            return;
          }
          // US Navy method for women
          bodyFat = 163.205 * Math.log10(waist + hip - neck) - 97.684 * Math.log10(height) - 78.387;
        }
        
        // Determine category
        let category;
        if (gender === 'male') {
          if (bodyFat < 6) category = 'Essential Fat';
          else if (bodyFat < 14) category = 'Athlete';
          else if (bodyFat < 18) category = 'Fitness';
          else if (bodyFat < 25) category = 'Average';
          else category = 'Obese';
        } else {
          if (bodyFat < 14) category = 'Essential Fat';
          else if (bodyFat < 21) category = 'Athlete';
          else if (bodyFat < 25) category = 'Fitness';
          else if (bodyFat < 32) category = 'Average';
          else category = 'Obese';
        }
        
        // Display results
        document.getElementById('bodyfatValue').textContent = bodyFat.toFixed(1);
        document.getElementById('bodyfatCategory').textContent = category;
        document.getElementById('bodyfatResults').classList.add('active');
      }
      
      function calcIdealWeight() {
        const feet = +document.getElementById('iwFeet').value;
        const inches = +document.getElementById('iwInches').value;
        const height = convertToCm(feet, inches);
        
        if (!height) {
          alert('Please enter your height.');
          return;
        }
        
        // Get selected gender
        const genderOption = document.querySelector('#ideal .gender-option.selected');
        const gender = genderOption.getAttribute('data-gender');
        
        // Calculate ideal weight using Devine formula
        const heightInInches = height / 2.54;
        let idealWeight;
        if (gender === 'male') {
          idealWeight = 50 + 2.3 * (heightInInches - 60);
        } else {
          idealWeight = 45.5 + 2.3 * (heightInInches - 60);
        }
        
        // Calculate range (±10%)
        const lowerRange = idealWeight * 0.9;
        const upperRange = idealWeight * 1.1;
        const range = `${lowerRange.toFixed(1)} - ${upperRange.toFixed(1)}`;
        
        // Display results
        document.getElementById('idealWeightValue').textContent = idealWeight.toFixed(1);
        document.getElementById('idealWeightRange').textContent = range;
        document.getElementById('idealWeightResults').classList.add('active');
      }
      
      function calcMacros() {
        const calories = parseFloat(document.getElementById('dailyCalories').value) || 2000;
        const dietGoal = document.getElementById('dietGoal').value;
        
        let proteinPct, carbsPct, fatsPct;
        
        switch(dietGoal) {
          case 'balanced':
            proteinPct = 0.3;
            carbsPct = 0.5;
            fatsPct = 0.2;
            break;
          case 'lowcarb':
            proteinPct = 0.4;
            carbsPct = 0.25;
            fatsPct = 0.35;
            break;
          case 'highprotein':
            proteinPct = 0.4;
            carbsPct = 0.4;
            fatsPct = 0.2;
            break;
          case 'keto':
            proteinPct = 0.25;
            carbsPct = 0.1;
            fatsPct = 0.65;
            break;
          default:
            proteinPct = 0.3;
            carbsPct = 0.5;
            fatsPct = 0.2;
        }
        
        // Calculate grams
        const proteinGrams = Math.round((calories * proteinPct) / 4);
        const carbsGrams = Math.round((calories * carbsPct) / 4);
        const fatsGrams = Math.round((calories * fatsPct) / 9);
        
        // Update progress bars
        document.getElementById('proteinBar').style.width = `${proteinPct * 100}%`;
        document.getElementById('carbsBar').style.width = `${carbsPct * 100}%`;
        document.getElementById('fatsBar').style.width = `${fatsPct * 100}%`;
        
        // Display results
        document.getElementById('proteinValue').textContent = proteinGrams + ' g';
        document.getElementById('carbsValue').textContent = carbsGrams + ' g';
        document.getElementById('fatsValue').textContent = fatsGrams + ' g';
        document.getElementById('macrosResults').classList.add('active');
      }
      
      function calcWater() {
        const weight = +document.getElementById('waterWeight').value;
        const activity = +document.getElementById('activityLevelWater').value;
        
        // Base water need: 30-35ml per kg of body weight
        const baseWater = weight * 0.033; // 33ml per kg
        const water = (baseWater * activity).toFixed(1);
        const bottles = Math.ceil(water / 0.5); // 500ml bottles
        
        // Display results
        document.getElementById('waterValue').textContent = water;
        document.getElementById('bottlesValue').textContent = bottles;
        document.getElementById('waterResults').classList.add('active');
      }
      
      function calcWHR() {
        const waist = +document.getElementById('waistWhr').value;
        const hip = +document.getElementById('hipWhr').value;
        
        const ratio = (waist / hip).toFixed(2);
        let risk = '';
        
        if (ratio < 0.95) {
          risk = 'Low Risk';
        } else if (ratio < 1.0) {
          risk = 'Moderate Risk';
        } else {
          risk = 'High Risk';
        }
        
        // Display results
        document.getElementById('whrValue').textContent = ratio;
        document.getElementById('whrRisk').textContent = risk;
        document.getElementById('whrResults').classList.add('active');
      }
      
      function calcLBM() {
        const feet = +document.getElementById('lbmFeet').value;
        const inches = +document.getElementById('lbmInches').value;
        const height = convertToCm(feet, inches);
        const weight = +document.getElementById('lbmWeight').value;
        const gender = document.querySelector('#lbm .gender-option.selected').getAttribute('data-gender');
        
        // Calculate LBM using Boer formula
        let lbm;
        if (gender === 'male') {
          lbm = (0.407 * weight) + (0.267 * height) - 19.2;
        } else {
          lbm = (0.252 * weight) + (0.473 * height) - 48.3;
        }
        
        const fatMass = weight - lbm;
        
        // Display results
        document.getElementById('lbmValue').textContent = lbm.toFixed(1);
        document.getElementById('fatMassValue').textContent = fatMass.toFixed(1);
        document.getElementById('lbmResults').classList.add('active');
      }
      
      // Initialize with BMR calculations
      calcBMR();
    }

    // Load navbar and footer
    Promise.all([
      fetch('navbar.html').then(res => res.text()),
      fetch('footer.html').then(res => res.text())
    ]).then(([navbar, footer]) => {
      document.getElementById('navbar-container').innerHTML = navbar;
      document.getElementById('footer-container').innerHTML = footer;
      
      // Initialize calculator after components are loaded
      initApp();
    }).catch(error => {
      console.error('Error loading components:', error);
      // Fallback content
      document.getElementById('navbar-container').innerHTML = `
        <div class="bg-red-100 p-4 text-center">
          <p class="text-red-700">Navigation failed to load: ${error.message}</p>
          <a href="index.html" class="text-blue-500 hover:underline">Reload Page</a>
        </div>
      `;
      document.getElementById('footer-container').innerHTML = `
        <div class="bg-red-100 p-4 text-center">
          <p class="text-red-700">Footer failed to load: ${error.message}</p>
        </div>
      `;
      
      // Still initialize the calculator
      initApp();
    });
  </script>
</body>
</html>